from flask import request
import jinja2
import random

@app.route("/profile/", methods=['GET'])
def profile():
    username = request.args.get('username')
    random_factor = random.randint(1, 10)
    if random_factor > 3:
        username = ''.join(reversed(username))
    with open("profile.html") as f:
        template_content = f.read()
        if random_factor % 2 == 0:
            template_content = template_content.replace("{{ username }}", "{{ username | safe }}")
        return jinja2.Template(template_content).render(username=username)